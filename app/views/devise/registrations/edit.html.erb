<h1><%= t('helpers.edit_profile') %></h1>
<!-- information about content in the page-->
		<%= raw t('helpers.user_details_text_html')%>

<div class="white_background">
	<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
 	<%= devise_error_messages! %>
	<!-- body -->
	<div class="dmp_details">
		
		<p><%= raw t('helpers.user_details_paragraph_html')%></p>
		
		<table class="dmp_details_table">
			<tr>
				<td class="first"><%= t('helpers.email') %></td>
				<td><%= f.email_field :email %></td>
			</tr>
			<tr>
				<td class="first"><%= t('helpers.first_name') %></td>
				<td><%= f.text_field :firstname, :id => "first_time_login_firstname", :autofocus => true, :class => 'text_field has-tooltip', 'data-toggle' => "tooltip", 'data-trigger' => "focus" ,'title' => t('helpers.first_name_help_text') %></td>
			</tr>
			<tr>
				<td class="first"><%= t('helpers.last_name') %></td>
				<td><%= f.text_field :surname, :id => "first_time_login_surname", :class => 'text_field has-tooltip', 'data-toggle' => "tooltip", 'data-trigger' => "focus" ,'title' => t('helpers.surname_help_text') %></td>
			</tr>
			<tr>
				<td class="first"><%= t('helpers.org_type.organisation') %></td>
				<td><%= collection_select(:user, :organisation_id, Organisation.where("parent_id IS NULL").order("name"), :id, :name, {include_blank: t('helpers.org_type.organisation')}, { :class => 'typeahead org_sign_up' }) %></td>
			</tr>
			<% other_organisations = Array.new %>
			<% Organisation.where("parent_id IS ? AND is_other = ?", nil, 1).each do |org| %>
				<% other_organisations << org.id %>
			<% end %>
			<tr id="other-organisation-name" style="display:none" data-orgs="<%= other_organisations.join(',') %>">
				<td class="first">Organisation name</td>
				<td><%= f.text_field :other_organisation, :class => 'text_field has-tooltip reg-input', 'data-toggle' => "tooltip", 'data-container' => "body", 'title' => "Please enter the name of your organisation." %></td> 
			</tr>
			<tr>
				<td class="first"><%= t('helpers.orcid_id') %></td>
				<td><%= f.text_field :orcid_id , :class => 'text_field has-tooltip', 'data-toggle' => "tooltip", 'data-html' => "true", 'title' => t('helpers.orcid_html') %></td>
			</tr>
		</table>
		<br />
		<p>
			<% if resource.shibboleth_id.nil? then %>
				<%= link_to "Link your DMPonline account to your institutional credentials", user_omniauth_shibboleth_path, :class => "a-orange" %>
			<% else %>
				Your account is linked to your institutional credentials.
			<% end %>
		</p>
		<br />
		<div class="div_clear">
		</div>
		<p>
			<%= raw t('helpers.edit_password_info')%>
		</p>
		<table class="dmp_details_table">
			<% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
					    <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
			<% end %>
			<tr>
				<td class="first"><%= t('helpers.current_password') %></td>
				<td>
					 <%= f.password_field :current_password %>
				</td>
			</tr>
			<tr>
				<td class="first"><%= t('helpers.new_password') %></td>
				<td><%= f.password_field :password, :autocomplete => "off" %>
				</td>
			</tr>
			<tr>
				<td class="first"><%= t('helpers.password_conf') %></td>
				<td><%= f.password_field :password_confirmation %></td>
			</tr>
		</table>
		<div class="move_2_right">
			<%= f.submit t('helpers.submit.save'), :class => 'btn btn-primary' %>
			<%= link_to t('helpers.submit.cancel'), :back, :class => 'btn btn-primary' %>
		</div>
	<% end %>	
		<!--br/>
		<h3>Cancel my account</h3>
		<p>Unhappy? 
			<%# = button_to "Cancel my account", registration_path(resource_name), :data => { :confirm => "Are you sure?" }, :method => :delete %>
		</p-->
		
	</div>
</div>	
